# Документация

> Учтите, что описания атрибутов, получаемые через HTTP-реквесты берутся чисто от балды. Если вы - куратор, учитель или кто-то другой, работавший над REST API Алгоритмики и нашли несостыковку либо просто хотите дополнить документацию, [сабмитните новое ишью.](https://github.com/moontr3/algo_api/issues/new)

> Названия атрибутов, помеченных звездочкой `*`, могут отличаться от их истинного значения либо их истинное значение неизвестно.

> Некоторых атрибутов, доступных через `dict` у некоторых классов, может не существовать в самих классах в связи с неизвестностью обозначения атрибута.

## `algo_api.Session`

Сессия входа в систему.

### Аргументы

| Имя | Тип | Описание |
|-----|-----|-----|
| `login` | `str` | Ваш логин в системе. |
| `password` | `str` | Ваш пароль в системе. |


### Атрибуты

| Имя | Тип | Описание |
|-----|-----|-----|
| `login_name` | `str` | Ваш последний введённый логин в системе. |
| `password` | `str` | Ваш последний введённый пароль в системе. |
| `id` | `int` / `None` | ID пользователя на платформе.<br>`None`, если вы не вошли в систему. |
| `session` | `requests.Session` / `None` | Сессия, через которую обрабатываются все HTTP-реквесты.<br>`None`, если вы не вошли в систему. |

> При изменении логина или пароля напрямую вы останетесь на том же аккаунте, на который входили.


### Функции

#### `login(login: str, password: str)`

Входит в аккаунт.

Если вы уже вошли в аккаунт, поднимет ошибку `AlreadyLoggedIn`.

Эта функция автоматически выполняется при создании объекта
класса `algo_api.Session` с указанными данными.


#### `close()`

Выходит из аккаунта и завершает сессию.

Для повторного входа в систему необходимо вызвать `login()`.


#### `my_profile()`

Возвращает полную информацию профиля залогиненного
пользователя в виде объекта класса `SelfProfile`.

Если вы не вошли в аккаунт, поднимет ошибку `SessionClosed`.


#### `get_profile(id: int)`

Возвращает профиль пользователя под указанным ID в 
виде объекта класса `Profile`.

Если пользователь не найден, поднимет ошибку `ProfileNotFound`.

Если вы не вошли в аккаунт, поднимет ошибку `SessionClosed`.


## `algo_api.SelfProfile`

Профиль пользователя, под которым вы зашли.

При конвертации в `int` вернёт ID пользователя в системе.

При конвертации в `str` вернёт логин (`username`) пользователя.

### Атрибуты

| Имя | Тип | Описание |
|-----|-----|-----|
| `dict` | `dict` | Словарь, полученый при отправлении запроса. |
| `id` | `int` | ID пользователя в системе. |
| `first_name` | `str` | Имя пользователя. |
| `last_name` | `str` | Фамилия пользвателя. |
| `parent_name` | `str` | Имя родителя пользователя. |
| `full_name` | `str` | Полное имя (Ф.И.) пользователя. |
| `username` | `str` | Имя, используемое при входе в систему (логин).<br>Никому, кроме вас, этот атрибут виден не будет. |
| `phone` | `str` | Номер телефона для связи с пользователем. |
| `email` | `str` | Электронная почта для связи с пользователем. |
| `is_teacher` | `bool` | Является ли пользователь учителем. |
| `is_celebrity` | `bool` | Является ли пользователь Селебрити. |
| `lang` | `str` | Язык пользователя. |
| `branch` | `algo_api.Branch` | Ветка обучения пользователя. |
| `ban` | `algo_api.Ban` | Информация о бане пользователя. |
| `settings` | `algo_api.Settings` | Настройки редактора пользователя. Менять их может только учитель.* |
| `avatar` | `algo_api.Avatar` | Информация об аватаре пользователя. |
| `course` | `algo_api.Course` | Информация о текущем курсе пользователя. |
| `birth_date` | `datetime.date` | Дата рождения пользователя. |


## `algo_api.Profile`

Видимый профиль пользователя.

При конвертации в `int` вернёт ID пользователя в системе.

При конвертации в `str` вернёт полное имя (`full_name`) пользователя.

### Атрибуты

| Имя | Тип | Описание |
|-----|-----|-----|
| `dict` | `dict` | Словарь, полученый при отправлении запроса. |
| `id` | `int` | ID пользователя в системе. |
| `first_name` | `str` | Имя пользователя. |
| `last_name` | `str` | Фамилия пользвателя. |
| `full_name` | `str` | Полное имя (Ф.И.) пользователя. |
| `is_celebrity` | `bool` | Является ли пользователь Селебрити. |
| `about` | `str` | "Обо мне" пользователя. |
| `course_name` | `str` | Имя курса, на котором учится пользователь. |
| `city` | `str` | Город пользователя. |
| `friend_status` | `str` / `None` | Текущий статус друга между вами и пользователем.<br>`None` - незнакомцы / пользователь подписан на вас<br>`follow` - вы подписаны на пользователя<br>`friend` - вы друзья |
| `updated_at` | `datetime.datetime` | Дата и время последнего обновления пользователя.* |
| `stats` | `UserStats` | Статистика пользователя. |
| `avatar` | `Avatars` | Аватар(-ы) пользователя. |
| `friends` | `list[ProfilePreview]` | Список друзей пользователя. |
| `classmates` | `list[ProfilePreview]` | Список одноклассников пользователя. |


## `algo_api.ProfilePreview`

Превью профиля. Обычно появляется в месте автора проекта, в списке друзей и тому подобное.

При конвертации в `int` вернёт ID пользователя в системе.

При конвертации в `str` вернёт полное имя (`full_name`) пользователя.

### Атрибуты

| Имя | Тип | Описание |
|-----|-----|-----|
| `dict` | `dict` | Словарь, полученый при отправлении запроса. |
| `id` | `int` | ID пользователя в системе. |
| `first_name` | `str` | Имя пользователя. |
| `last_name` | `str` | Фамилия пользвателя. |
| `full_name` | `str` | Полное имя (Ф.И.) пользователя. |
| `is_celebrity` | `bool` | Является ли пользователь Селебрити. |
| `avatar` | `Avatar` | Аватар пользователя. |


## `algo_api.Avatar`

Аватар пользователя.

При конвертации в `str` вернёт ссылку на SVG-версию аватара (`svg_url`).

### Атрибуты

| Имя | Тип | Описание |
|-----|-----|-----|
| `name` | `str` / `None` | Имя стандартного аватара.<br>Вернёт `None`, если установлен кастомный аватар.* |
| `small_url` | `str` / `None` | Ссылка на стандартный аватар.<br>Вернёт `None`, если установлен кастомный аватар.* |
| `svg_url` | `str` | Ссылка на SVG-версию аватара пользователя. |


## `algo_api.AvatarTemplate`

Стандартный аватар.

При конвертации в `str` вернёт ссылку на аватар (`url`).

### Атрибуты

| Имя | Тип | Описание |
|-----|-----|-----|
| `name` | `str` | Имя стандартного аватара. |
| `url` | `str` | Ссылка на стандартный аватар. |
| `small_url` | `str` | Ссылка на мини-версию аватара. |


## `algo_api.Avatars`

Список аватаров пользователя, включая текущий.

При конвертации в `str` вернёт ссылку на SVG-версию аватара (`svg_url`).

### Атрибуты

| Имя | Тип | Описание |
|-----|-----|-----|
| `name` | `list[AvatarTemplate]` | Список доступных стандартных аватаров. |
| `svg_url` | `str` | Ссылка на SVG-версию аватара пользователя. |


## `algo_api.UserStats`

Статистика пользователя.

### Атрибуты

| Имя | Тип | Описание |
|-----|-----|-----|
| `liked_by_you` | `bool` | Лайкнут ли профиль Вами.* |
| `classmates` | `int` | Количество одногруппников у пользователя. |
| `projects` | `int` | Количество проектов у пользователя. |
| `views` | `int` | Количество просмотров под всеми проектами в сумме. |
| `likes` | `int` | Количество лайков под всеми проектами в сумме. |
| `reactions` | `int` | Количество реакций пользователя.* |
| `friends` | `int` | Количество друзей у пользователя. |
| `followers` | `int` | Количество подписчиков у пользователя. |
| `following` | `int` | Количество пользователей, на которых подписан пользователь. |
| `avatars` | `int` | Количество аватаров у пользователя. |
| `avatar_items` | `int` | Количество предметов для создания аватара у пользователя. |
| `lootboxes` | `int` | Количество лутбоксов у пользователя.* |


## `algo_api.Course`

Информация о курсе пользователя.

При конвертации в `str` вернёт отображаемое имя курса (`display_name`).

### Атрибуты

| Имя | Тип | Описание |
|-----|-----|-----|
| `id` | `int` | ID курса. |
| `name` | `str` | Имя курса. |
| `display_name` | `str` | Отображаемое имя курса. |
| `description` | `str` | Подробное описание курса. |
| `gamification_enabled` | `int` | Включена ли геймификация.* |
| `gamification_level_points` | `int` | Количество очков геймификации.* |
| `gamification_bonus_points` | `int` | Количество бонусных очков геймификации.* |


## `algo_api.Settings`

Настройки редактора пользователя.

### Атрибуты

| Имя | Тип | Описание |
|-----|-----|-----|
| `allowed_file_extensions` | `list[str]` | Разрешенные для загрузки в проекты файлы. |
| `vscode_file_name_pattern` | `str` | Фраза Regex для определения файлов VSCode. |
| `prosveshenie_token` | `str` | Токен просвещения.* |


## `algo_api.Ban`

Информация о бане пользователя.

### Атрибуты

| Имя | Тип | Описание |
|-----|-----|-----|
| `is_banned` | `bool` | Забанен ли пользователь. |
| `reason` | `str` / `None` | Причина бана пользователя.<br>Вернёт `None`, если пользователь не забанен. |
| `expires_at` | `datetime.datetime` / `None` | Время окончания бана.<br>Вернёт `None`, если пользователь не забанен. |


## `algo_api.Branch`

Ветка, в которой учится пользователь.

При конвертации в `str` вернёт имя ветки (`title`).

При конвертации в `int` вернёт ID ветки (`id`).

### Атрибуты

| Имя | Тип | Описание |
|-----|-----|-----|
| `id` | `int` | ID ветки в системе. |
| `brand_name` | `str` | Имя бренда ветки.* |
| `title` | `str` | Название ветки. |
| `code` | `str` | Кодовое название ветки в системе. |
| `phone` | `str` | Номер телефона горячей линии ветки. |
| `site_url` | `str` / `None` | Ссылка на сайт ветки.<br>Вернёт `None`, если сайта нет. |